<!DOCTYPE HTML>
<html>
	<head>
		<title>hit the spot</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

		<link href='//fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/skeleton-css@2.0.4/css/normalize.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/getskeleton@2.0.4-2/lib/css/skeleton.min.css">

		<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js"></script>
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/axios@1.6.2/dist/axios.min.js"></script>

		<style>
			iframe {width:100%;border:none;}
			ul {list-style: none;}
		</style>
	</head>
	<body>
		<div class="section hero">
			<div class="container">
			  <div class="row">
				<div class="one-half column">
				  <h4 class="hero-heading">HIT THE SPOT</h4>
				</div>				
			  </div>
			</div>
		</div>

		<div class="section">
			<div id="wrap" class="container">
				<div class="section">
					<div class="row">
							<div class="one column">
								<label for="searchword">filter</label>
							</div>
							<div class="eight columns">
								<input class="u-full-width" type="text" placeholder="type enter" id="searchword" v-model="searchtext" @keyup.enter="fn_add()">
							</div>
							<div class="two columns">
								<a class="button" href="javascript:void(0)" @click="fn_add()">add filter</a>
							</div>
					</div>
					<div class="row">
						<div class="twelve columns">
							<a v-for="(tag,idx) in tags" class="button" style="margin-right: 0.5em;" @click="fn_remove(tag)">{{tag}}</a>
						</div>
					</div>
				</div>
				<hr/>
				<div class="section">
					<ul>
						<li class="card"  v-for="item in list">
							<div class="row">
								<h5>{{item.name}} </h5>
								<a :href="item.instagram" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><linearGradient id="a" x1="-37.094" x2="-26.555" y1="-72.719" y2="-84.047" gradientTransform="matrix(0 -1.982 -1.8439 0 -132.522 -51.077)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#fd5"/><stop offset=".5" stop-color="#ff543e"/><stop offset="1" stop-color="#c837ab"/></linearGradient><path fill="url(#a)" d="M1.5 1.633C-.386 3.592 0 5.673 0 11.995c0 6.336-.158 7.499.602 9.075a5.056 5.056 0 0 0 3.276 2.677c1.144.294 1.904.253 8.1.253 5.194 0 6.81.093 8.157-.255 1.996-.515 3.62-2.134 3.842-4.957.031-.394.031-13.185-.001-13.587C23.74 2.194 21.889.461 19.45.11c-.56-.081-.672-.105-3.54-.11C5.737.005 3.507-.448 1.5 1.633z"/><path fill="#fff" d="M11.998 3.139c-3.631 0-7.079-.323-8.396 3.057-.544 1.396-.465 3.209-.465 5.805 0 2.278-.073 4.419.465 5.804 1.314 3.382 4.79 3.058 8.394 3.058 3.477 0 7.062.362 8.395-3.058.545-1.41.465-3.196.465-5.804 0-3.462.191-5.697-1.488-7.375-1.7-1.7-3.999-1.487-7.374-1.487zm-.794 1.597c4.346-.007 7.811-.607 8.006 3.683.072 1.589.072 5.571 0 7.16-.189 4.137-3.339 3.683-7.211 3.683-3.412 0-5.104.121-6.244-1.02-1.157-1.157-1.019-2.811-1.019-6.245 0-4.071-.385-7.026 3.683-7.213.817-.037 1.134-.048 2.785-.05zm5.524 1.471a1.063 1.063 0 1 0 0 2.126 1.063 1.063 0 0 0 0-2.126zm-4.73 1.243a4.55 4.55 0 1 0 .001 9.101 4.55 4.55 0 0 0-.001-9.101zm0 1.597a2.954 2.954 0 1 1-.001 5.907 2.954 2.954 0 0 1 .001-5.907z"/></svg></a>
								<a :href="'https://map.naver.com/p/search/'+item.address" title="naver map" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#607d8b" d="M1 24a.999.999 0 0 1-.707-1.707l10.55-10.55a.999.999 0 1 1 1.414 1.414l-10.55 10.55A.997.997 0 0 1 1 24z"/><circle cx="16.25" cy="7.75" r="7.75" fill="#4caf50"/><path fill="#fff" d="M12.25 8.5a.75.75 0 0 1-.75-.75A4.756 4.756 0 0 1 16.25 3a.75.75 0 0 1 0 1.5A3.254 3.254 0 0 0 13 7.75a.75.75 0 0 1-.75.75z"/></svg></a>
							</div>
							<div class="row">
								<a class="button" style="margin-right: 0.5em;" v-for="tag in item.tags" @click="fn_filter(tag)">{{tag}}</a>
							</div>
							<ul >
								<li>{{item.address}}</li>
							</ul>
							
						</li>
					</ul>
				</div>
			</div>
		</div>

		<script type="text/javascript">
			const app = Vue.createApp({
				data() {
					return {
						origin:[],
						list:[],
						searchtext: '',
						tags:[]
					}
				},
				methods: {
					fn_add: function () {
						this.tags.push(this.searchtext);
						this.tags = _.uniqBy(this.tags);
						this.searchtext = '';
						this.fn_search();
					},
					fn_remove: function (tag) {						
						this.tags = _.pull(this.tags, tag);
						this.fn_search();
					},
					fn_filter: function (tag) {
						this.tags.push(tag);
						this.tags = _.uniqBy(this.tags);
						this.fn_search();
					},
					fn_search:function () {
						if(this.tags.length == 0) {
							this.list = this.origin;
						} else {
							let self = this;
							this.list = [];
							_.forEach(this.origin, function (item) {
								// tag
								let isMatch = true;
								_.forEach(self.tags, function (tag) {
									if(!_.includes(item.tags, tag)) {
										isMatch = false;
									}
								});
								// name
								_.forEach(self.tags, function (tag) {
									if(_.includes(item.name, tag)) {
										isMatch = true;
									}
								});

								if(isMatch) {
									self.list.push(item);
								}
							});
						} 						
					}
				},
				async mounted()  {
					let a = await axios.get('../data/fav.json');
					this.origin = a.data;
					this.fn_search();
				}
			}).mount('#wrap');
		</script>
	</body>
</html>